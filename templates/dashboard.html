{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block head %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='dontcommit.js') }}"></script>
{% endblock %}

{% block content %}
<h1>Dashboard</h1>
<div>
  <h2>Current status: <span id="status">loading...</span></h2>
  <p>Last update: <span id="last_data">loading...</span></p>
  <p><a href="{{ url_for('get_parameters_page') }}">Model parameters</a></p>
  <script>
    loadDashboardInfo();
  </script>
</div>
<div style="position: relative; height:40vh; width:90%; text-align: center;">
  <div class="button-group align-right">
    <button onclick="updateChartForPeriod('day')">Day</button>
    <button onclick="updateChartForPeriod('week')">Week</button>
    <button onclick="updateChartForPeriod('all')">All</button>
  </div> 
  <canvas id="chart"></canvas>
  <script>
    setupChart();
  </script>
</div>
{% endblock %}
