{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block head %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='dontcommit.js') }}"></script>
{% endblock %}

{% block content %}
<h1>Dashboard</h1>
<div>
  <h2>Current status: <span id="status">loading...</span></h2>
  <p>Last update: <span id="last_data">loading...</span></p>
  <p>
    Current maximum humidity before alert: <span id="max_humidity">loading...</span><br/>
    Current humidity threshold for acceptable humidity: <span id="threshold_humidity">loading...</span>
  </p>
  <script>
    loadDashboardInfo();
  </script>
</div>
<div style="position: relative; height:40vh; width:80vw">
  <div class="button-group">
    <button onclick="updateChartForPeriod('day')">Day</button>
    <button onclick="updateChartForPeriod('week')">Week</button>
    <button onclick="updateChartForPeriod('all')">All</button>
  </div> 
  <canvas id="chart"></canvas>
  <script>
    setupChart();
  </script>
</div>
{% endblock %}
